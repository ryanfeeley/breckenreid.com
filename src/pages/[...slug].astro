---
import { getCollection } from "astro:content";
import Page from "../templates/Page.astro";
import Contact from "../templates/Contact.astro";

export async function getStaticPaths() {
  const pages = await getCollection("pages");

  return pages
    .filter((entry) => entry.slug !== "index")
    .map((entry) => ({
      params: { slug: entry.slug === "index" ? undefined : entry.slug },
      props: { entry },
    }));
}

const { entry } = Astro.props;
const templateKey = entry.data.templateKey;
---

{templateKey === "contact-page" ? <Contact entry={entry} /> : <Page entry={entry} />}
